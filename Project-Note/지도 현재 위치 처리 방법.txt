지도 현재 위치 처리 방법
1. 앱이 실행되면 위치와 시간을 5초 단위로 기록하지만 저장하지는 않는다.
2. 앱이 종료되면 전체 위치의 중간 위치를 계산해서 최종 위치로 정하고 시간도 같은 방법으로 중간시간을 정한다.
3. 2. 에서 계산된 중간위치와 중간시간을 저장 기준으로 해서 참고 자료로 위치, 시간 리스트를 같이 저장한다.
4. 이렇게 하면 앱이 시작되고 종료될 때까지 위치, 시간은 하나만 저장되게 되고 몇시에 어디서 부터 몇시에 어디까지 움직였는지도 기록할 수 있게 된다.
5. 좀 더 발전시키면 움직인 시간단위 위치 리스트가 아니라 방향이 바뀐 장소와 시간만 기록해서 리스트 내역을 줄일 수 있다.
6. 이런 방법으로 위치를 저장하면 같은곳에 여러개의 핀을 표시하는 문제가 생기는데 지도의 확대 축소에 따라 핀이 겹치는 정도가 50%가 되면 클러스터링 해서 핀안에 하얀 동그라미를 그리고 동그라미 안에 중복횟수를 "9+" 형태로 표기해줘
7. 핀을 선택하면 여러개가 하나로 표시된 핀의 말풍선에 각각다른 시간을 표시할 수 있게 된다.
8. 모든 핀 모양은 같은 모양을 사용하고 등록한 위치는 녹색, 앱을 실행할 때 발생하는 위치(현재 위치가 저장되어 사용하가 등록하지 않은 위치) 와 현재 위치 핀은 빨강색, 서버로 부터 전달받은 메세지에 의한 위치는 파랑색을 사용하고 5m 이내의 핀은 하나의 핀만 표시하고 클러스터링된 갯수를 핀에 뱃지(9개 이상은 9+)로 표시한다.
9. 클러스터링된 핀을 터치하면 말풍선안에 시간과 휴지통을 시간 순서대로 표시하는데 핀이 녹색도 빨강색도 있을 수 있기 때문에 말풍선에 글씨 색을 녹색과 빨강색으로 표시한다.
10. 6. 에서 50%가 겹치는지를 매번 계산하지 말고 거리 상수값을 정해 놓고 처리해서 처리 속도를 높인다.
11. 지도를 확대 축소할 때마다 클러스터링을 다시 계산한다.
12. 클러스터링으로 묶였다가 풀어질 때 뱃지를 항상 다시 표시한다. 특히 클러스터링 되지 않으면 뱃지를 표시하지 않는다.
13. 지도를 축소하면 핀은 하나로 나타나는데 클러스터링이 다시 만들어져야 한다.
14. 클러스터링이 풀려서 싱글핀이 되었을 때 시간이표시되면 안된다.
15. 말풍선에 시간 글씨 15 point 로 표시한다.
16. 말풍선에 말풍선 이름을 표시하지 않는다.
17. 말풍선에 높이는 4개 이상일 때 스크롤을 사용하고 4개 미만일 때는 말풍선의 높이를 낮춘다.
18. 클러스터링 핀은 시간을 표시할 때 글씨를 진한 빨강과 진한 녹색으로 표시하고 클러스터링이 아니면 진한 회색을 사용한다.
19. 현재 위치가 클러스터링되면 시작시간과 종료시간을 표시하지 않고 중간시간만 사용하는데 현재 위치의 시간은 시작 시간을 사용하여 말풍선의 폭을 좁힌다.

안드로이드에 적용해줘

아이폰용으로 먼저 시험해보고 안드로이드에 적용하자

이건 안드로이드의 처리 방법도 찾아서 확인해야 한다.


